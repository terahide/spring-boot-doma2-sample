<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{common/layout}" th:with="menu='account'"><!--/* menuItemにパラメータを渡す */-->
<head layout:fragment="~{common/layout::header}">
    <title>プロフィール編集</title>
</head>
<body>
<!--/* この形式のコメントはHTMLソースから削除される */-->
<div layout:fragment="content">
    <h2>プロフィール編集</h2>
    <div><span class="glyphicon glyphicon-envelope">email：</span><span th:text="${user.email}" /></div>
    <form th:object="${profileForm}" th:action="@{/account/profile}" method="post" id="profileForm"
          enctype="multipart/form-data" >
        <div class="box-body">

            <div id="imageContainer"><image th:unless="${user.hasImage()}" height="200px" th:src="@{/static/images/no_photo.png}" /><image th:if="${user.hasImage()}" height="200px" th:src="@{/user/__${user.id}__/image}" /></div>
            <br />
            <input th:replace="~{common/inputField :: input ('text', '苗字', 'lastName')}" />
            <input th:replace="~{common/inputField :: input ('text', '名前', 'firstName')}" />
            <input th:replace="~{common/inputField :: input ('text', '電話', 'tel')}" />
            <input th:replace="~{common/inputField :: input ('text', '所属', 'dept')}" />
            <input th:replace="~{common/inputField :: input ('text', '紹介', 'info')}" />
            <input th:replace="~{common/inputField :: input ('file', '画像', 'userImage')}" />
        </div>
        <div class="box-footer">
            <button class="btn btn-default bg-purple" type="submit">
                更新
            </button>
        </div>

        <input type="hidden" th:field="*{version}" />
    </form>
</div>
<div layout:fragment="scripts" th:remove="tag">
    <script type="text/javascript">
        $().ready(() => {
            $('input[name="userImage"]').on('change', event => {
                $('#imageContainer').hide();
            });
        });
    </script>
</div>>
</body>
</html>
