<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{common/layout}" th:with="menu='home'"><!--/* menuItemにパラメータを渡す */-->
<head layout:fragment="~{common/layout::header}">
    <title>ありがと</title>
</head>
<body>
<!--/* この形式のコメントはHTMLソースから削除される */-->
<div layout:fragment="content">
    <h2>感謝の気持ちを伝えよう</h2>
    <form th:object="${arigatoForm}" th:action="@{/arigato__${arigato == null ? '' : '/' + arigato.id}__}" method="post" id="arigatoForm"
          enctype="multipart/form-data" >
        <div class="box-body">
            <select th:replace="~{common/selectField :: select ('誰に？', 'toId', ${users})}" />
            <input th:replace="~{common/inputField :: input ('text', '件名', 'subject')}" />
            <input th:replace="~{common/inputField :: input ('text', '内容', 'body')}" />
            <input th:replace="~{common/inputField :: input ('file', '添付画像', 'image')}" />
        </div>

        <div id="imageContainer"><div th:if="${arigato?.hasImage()}" ><image width="300px" th:src="@{/arigato/image/__${arigato.firstImageId}__}" /></div></div>

        <div class="box-footer">
            <button class="btn btn-default bg-purple" type="submit">
                ありがと
            </button>
        </div>

        <input type="hidden" th:field="*{version}" />
    </form>
</div>
<div layout:fragment="scripts" th:remove="tag">
    <script type="text/javascript">
        $().ready(() => {
            $('input[name="image"]').on('change', event => {
                $('#imageContainer').hide();
            });
        });
    </script>
</div>>
</body>
</html>
